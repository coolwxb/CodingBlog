<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  ios - 小小程序猿
  
  </title>
  
  
  <link href="atom.xml" rel="alternate" title="小小程序猿" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
  function before_search(){
    var searchVal = 'site:daycoding.com ' + document.getElementById('search_input').value;
    document.getElementById('search_q').value = searchVal;
    return true;
  }
</script>
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        
        <li id=""><a target="self" href="index.html">Home</a></li>
        
        <li id=""><a target="_self" href="archives.html">Archives</a></li>
        
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" onsubmit="return before_search();" action="http://google.com/search" method="get">
    <input type="hidden" id="search_q" name="q" value="" />
    <input tabindex="1" type="search" id="search_input"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; 小小程序猿</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
       
       <li><a href="index.html">HOME</a></li>
    <li><a href="archives.html">Archives</a></li>
    <li><a href="about.html">ABOUT</a></li>

    <li><label>Categories</label></li>

        
            <li><a href="ios.html">ios</a></li>
        
            <li><a href="Android.html">Android</a></li>
        
            <li><a href="%E5%85%B6%E4%BB%96.html">其他</a></li>
        
            <li><a href="express.html">express</a></li>
        
            <li><a href="%E6%95%B0%E6%8D%AE%E5%BA%93.html">数据库</a></li>
        
            <li><a href="Vue.html">Vue</a></li>
        
            <li><a href="sequelize.html">sequelize</a></li>
         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
        
       

 <script type="text/javascript">
	$(function(){
		$('#menu_item_index').addClass('is_active');
	});
</script>
<div class="row">
	<div class="large-8 medium-8 columns">
		<div class="markdown-body home-categories">
		
			<div class="article">
                <a class="clearlink" href="14729755895496.html">
                
                  <h1>BOOL / bool / Boolean / NSCFBoolean 区别</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<table>
<thead>
<tr>
<th style="text-align: left">Name</th>
<th style="text-align: left">Typedef</th>
<th style="text-align: left">Header</th>
<th style="text-align: left">True Value</th>
<th style="text-align: left">False Value</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">BOOL</td>
<td style="text-align: left">signed char</td>
<td style="text-align: left">objc.h</td>
<td style="text-align: left">YES</td>
<td style="text-align: left">NO</td>
</tr>
<tr>
<td style="text-align: left">bool</td>
<td style="text-align: left">_Bool (int)</td>
<td style="text-align: left">stdbool.h</td>
<td style="text-align: left">true</td>
<td style="text-align: left">false</td>
</tr>
<tr>
<td style="text-align: left">Boolean</td>
<td style="text-align: left">unsigned char</td>
<td style="text-align: left">MacTypes.h</td>
<td style="text-align: left">True</td>
<td style="text-align: left">False</td>
</tr>
<tr>
<td style="text-align: left">NSNumber</td>
<td style="text-align: left">__NSCFBoolean</td>
<td style="text-align: left">Foundation.h</td>
<td style="text-align: left">@(YES)</td>
<td style="text-align: left">@(NO)</td>
</tr>
<tr>
<td style="text-align: left">CFBooleanRef</td>
<td style="text-align: left">struct</td>
<td style="text-align: left">CoreFoundation.h</td>
<td style="text-align: left">kCFBooleanTrue</td>
<td style="text-align: left">kCFBooleanFalse</td>
</tr>
</tbody>
</table>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/9/4</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html'>基础知识</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14729755573166.html">
                
                  <h1>解决xcode升级之后安装的插件失效</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>code升级之后uuid会发生变化，致使原来的plugin失效</p>

<p><strong><em>解决方案</em></strong></p>

<ul>
<li><p>find ~/Library/Application\ Support/Developer/Shared/Xcode/Plug-ins -name Info.plist -maxdepth 3 | xargs -I{} defaults write {} DVTPlugInCompatibilityUUIDs -array-add <code>defaults read /Applications/Xcode.app/Contents/Info.plist DVTPlugInCompatibilityUUID</code></p></li>
<li><p>find every plugin&#39;s Info.plist</p></li>
<li><p>default read current UUID of XCode</p></li>
<li><p>default write current UUID of XCode into plugin&#39;s DVTPlugInCompatibilityUUIDs</p></li>
</ul>

<p><em>from:</em><a href="http://stackoverflow.com/questions/22324303/the-plugin-didnt-work-on-xcode-5-1">stackoverflow</a></p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/9/4</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E6%80%BB%E7%BB%93.html'>总结</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14729755264473.html">
                
                  <h1>四叉树算法</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p><strong><em>转载：<a href="http://blog.csdn.net/zhanxinhang/article/details/6706217">http://blog.csdn.net/zhanxinhang/article/details/6706217</a></em></strong></p>

<p><a href="http://git.oschina.net/lbs/iOS_3D_ClusterAnnotation">高德iOS聚合实例</a></p>

<p><a href="http://git.oschina.net/lbs/Android_CustomMarker">高德Android聚合实例</a></p>

<p>四叉树或四元树也被称为Q树（Q-Tree）。四叉树广泛应用于图像处理、空间数据索引、2D中的快速碰撞检测、存储稀疏数据等，而八叉树（Octree）主要应用于3D图形处理。对游戏编程，这会很有用。本文着重于对四叉树与八叉树的原理与结构的介绍，帮助您在脑海中建立四叉树与八叉树的基本思想。本文并不对这两种数据结构同时进行详解，而只对四叉树进行详解，因为八叉树的建立可由四叉树的建立推得。</p>

<p>四叉树与八叉树的结构与原理<br/>
四叉树（Q-Tree）是一种树形数据结构。四叉树的定义是：它的每个节点下至多可以有四个子节点，通常把一部分二维空间细分为四个象限或区域并把该区域里的相关信息存入到四叉树节点中。这个区域可以是正方形、矩形或是任意形状。以下为四叉树的二维空间结构(左)和存储结构(右)示意图（注意节点颜色与网格边框颜色）：</p>

<p><img src="media/14729755264473/69130165.jpg" alt=""/></p>

<p>四叉树的每一个节点代表一个矩形区域（如上图黑色的根节点代表最外围黑色边框的矩形区域），每一个矩形区域又可划分为四个小矩形区域，这四个小矩形区域作为四个子节点所代表的矩形区域。<br/>
较之四叉树，八叉树将场景从二维空间延伸到了三维空间。八叉树（Octree）的定义是：若不为空树的话，树中任一节点的子节点恰好只会有八个，或零个，也就是子节点不会有0与8以外的数目。那么，这要用来做什么？想象一个立方体，我们最少可以切成多少个相同等分的小立方体？答案就是8个。如下八叉树的结构示意图所示：</p>

<p><img src="media/14729755264473/8882925.jpg" alt=""/></p>

<pre><code>/* 一个矩形区域的象限划分：:

       UL(1)   |    UR(0)
     ----------|-----------
       LL(2)   |    LR(3)
以下对该象限类型的枚举
*/
typedef enum
{
    UR = 0,
    UL = 1,
    LL = 2,
    LR = 3
}QuadrantEnum;

/* 矩形结构 */
typedef struct quadrect_t
{    
    double  left, 
            top, 
            right, 
            bottom;
}quadrect_t;

/* 四叉树节点类型结构 */
typedef struct quadnode_t
{
    quadrect_t    rect;          //节点所代表的矩形区域
    list_t        *lst_object;   //节点数据, 节点类型一般为链表，可存储多个对象
    struct  quadnode_t  *sub[4]; //指向节点的四个孩子 
}quadnode_t;

/* 四叉树类型结构 */
typedef struct quadtree_t
{
    quadnode_t  *root;
    int         depth;           // 四叉树的深度                    
}quadtree_t;

</code></pre>

<h4 id="toc_0">四叉树的建立</h4>

<p>利用四叉树分网格，如本文的第一张图，根据左图的网格图形建立如右图所示的完全四叉树。</p>

<p><strong>伪码：</strong></p>

<pre><code>Funtion QuadTreeBuild ( depth, rect )
   {
QuadTree-&gt;depth = depth;

/*创建分支，root树的根，depth深度，rect根节点代表的矩形区域*/
QuadCreateBranch (  root, depth, rect );
   }

Funtion QuadCreateBranch ( n, depth,rect )
   {
if ( depth!=0 )
   {
n = new node;    //开辟新节点
n -&gt;rect = rect; //将该节点所代表的矩形区域存储到该节点中
将rect划成四份 rect[UR], rect[UL], rect[LL], rect[LR];

/*创建各孩子分支*/
QuadCreateBranch ( n-&gt;sub[UR], depth-1, rect [UR] );
QuadCreateBranch ( n-&gt;sub[UL], depth-1, rect [UL] );
QuadCreateBranch ( n-&gt;sub[LL], depth-1, rect [LL] );
QuadCreateBranch ( n-&gt;sub[LR], depth-1, rect [LR] );
   }
   }

</code></pre>

<p>假设在一个矩形区域里有N个对象，如下左图一个黑点代表一个对象，每个对象的坐标位置都是已知的，用四叉树的一个节点存储一个对象，构建成如下右图所示的四叉树。</p>

<p><img src="media/14729755264473/23531676.jpg" alt=""/></p>

<p>方法也是采用递归的方法对该矩形进行划分分区块，分完后再往里分，直到每一个子矩形区域里只包含一个对象为止。<br/>
<strong>伪码：</strong></p>

<pre><code>Funtion QuadtreeBuild()
  {
     Quadtree = {empty}；
     For (i = 1;i&lt;n;i++)      //遍历所有对象
{
   QuadInsert(i, root)；//将i对象插入四叉树
}          
         剔除多余的节点；       //执行完上面循环后，四叉树中可能有数据为空的叶子节点需要剔除
  }    

Funtion QuadInsert(i,n)      //该函数插入后四叉树中的每个节点所存储的对象数量不是1就是0
  {  
     if（节点n有孩子）
 {      
    通过划分区域判断i应该放置于n节点的哪一个孩子节点c；       
    QuadInsert(i,c)；
 }
     else if（节点n存储了一个对象）
 {
    为n节点创建四个孩子；
    将n节点中的对象移到它应该放置的孩子节点中；
    通过划分区域判断i应该放置于n节点的哪一个孩子节点c；
    QuadInsert(i,c)；
 }
     else if（n节点数据为空）    
 {
    将i存储到节点n中；
 }
  } 

</code></pre>

<h4 id="toc_1">用四叉树查找某一对象</h4>

<p>1、采用盲目搜索，与二叉树的递归遍历类似，可采用后序遍历或前序遍历或中序遍历对其进行搜索某一对象，时间复杂度为O（n）。</p>

<p>2、根据对象在区域里的位置来搜索，采用分而治之思想，时间复杂度只与四叉树的深度有关。比起盲目搜索，这种搜索在区域里的对象越多时效果越明显</p>

<p><img src="media/14729755264473/88618967.jpg" alt=""/></p>

<pre><code>Funtion find ( n, pos, )
  {
      If (n节点所存的对象位置为 pos所指的位置 )
          Return n;
      If ( pos位于第一象限 )
          temp = find ( n-&gt;sub[UR], pos );
      else if ( pos位于第二象限)
          temp = find ( n-&gt;sub[UL], pos );
      else if ( pos位于第三象限 )
          temp = find ( n-&gt;sub[LL], pos );
      else  //pos 位于第四象限
          temp = find ( n-&gt;sub[LR], pos );
      return temp;   
  } 
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/9/4</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E7%AE%97%E6%B3%95.html'>算法</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14729753596363.html">
                
                  <h1>NSDictionary不能写入文件</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p><strong>问题：</strong><br/>
调用字典<code>- (BOOL)writeToURL:(NSURL *)url atomically:(BOOL)atomically;</code>写入文件失败</p>

<p><strong>分析原因：</strong><br/>
字典中有<code>null</code>值，所以需要<code>NSKeyedArchiver</code>将之转化为<code>NSData</code>后再写入文件<br/>
<code>NSDictionary</code>中的数据：</p>

<pre><code>{
    style = &lt;null&gt;,
    status = 1,
    title = &quot;new&quot;,
    source = 1,
    mid = &quot;1iJltVKJ14kLn3sZgo3wCg&quot;,
    user_id = 10011,
    updated_at = &quot;2016-05-27T20:10:50.000+08:00&quot;,
    city_code = 131,
    permission = &quot;grp&quot;,
    city = &quot;北京市&quot;,
    backup_time = &lt;null&gt;,
    is_del = 0,
    id = 94445,
    level = 12,
    org_id = 10011,
    base_map = &quot;normal&quot;,
    rqcode = &quot;/uploads/rqcode/1iJltVKJ14kLn3sZgo3wCg.png&quot;,
    avatar = &quot;/uploads/avatars/2016/5/11/8ed403c6652f4d599f1e50daa89c427e.png&quot;,
    center = &quot;116.403874,39.914889&quot;,
    created_at = &quot;2016-05-11T15:08:43.000+08:00&quot;,
    rating = 0,
    description = &quot;&quot;,
}

</code></pre>

<p><strong>解决方法：</strong></p>

<pre><code>//写入
NSString* path = [[FileUtil dirCache] stringByAppendingPathComponent:@&quot;EDITMAP&quot;];
BOOL success = [[NSKeyedArchiver archivedDataWithRootObject:_mapArray[indexPath.row]] writeToFile:path atomically:YES];

//读取
NSData* data  = [[NSData alloc]initWithContentsOfFile:[[FileUtil dirCache] stringByAppendingPathComponent:@&quot;EDITMAP&quot;]];
NSDictionary* dic = (NSDictionary*)[NSKeyedUnarchiver unarchiveObjectWithData:data];
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/9/4</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E6%80%BB%E7%BB%93.html'>总结</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14729753083362.html">
                
                  <h1>iOS版本更新</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<pre><code>#pragma mark - 检查版本更新

#define APP_URL @&quot;http://itunes.apple.com/lookup?id=你的apple id&quot;
-(void)onCheckVersion
{
    NSString* currentVersion =  [[NSBundle mainBundle] objectForInfoDictionaryKey:@&quot;CFBundleShortVersionString&quot;];
    NSString *URL = APP_URL;
    AFHTTPRequestOperationManager *manager = [AFHTTPRequestOperationManager manager];
    manager.requestSerializer = [AFJSONRequestSerializer new];
    manager.responseSerializer = [AFJSONResponseSerializer new];
     [manager POST:URL parameters:nil success:^(AFHTTPRequestOperation * _Nonnull operation, id  _Nonnull responseObject) {
         NSArray *infoArray = [responseObject objectForKey:@&quot;results&quot;];
         if ([infoArray count]) {
             NSDictionary *releaseInfo = [infoArray objectAtIndex:0];
             NSString *lastVersion = [releaseInfo objectForKey:@&quot;version&quot;];

             if (![lastVersion isEqualToString:currentVersion]) {
                NSString* trackViewURL = [releaseInfo objectForKey:@&quot;trackViewUrl&quot;];
                 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@&quot;更新&quot; message:[releaseInfo objectForKey:@&quot;releaseNotes&quot;] delegate:self cancelButtonTitle:@&quot;关闭&quot; otherButtonTitles:@&quot;更新&quot;, nil] ;
                 [alert showAlertViewWithCompleteBlock:^(NSInteger buttonIndex) {
                     if (buttonIndex==1) {
                         UIApplication *application = [UIApplication sharedApplication];
                         [application openURL:[NSURL URLWithString:trackViewURL]];
                     }
                 }];
             }
         }
     } failure:^(AFHTTPRequestOperation * _Nullable operation, NSError * _Nonnull error) {

     }];
}
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/9/4</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E6%80%BB%E7%BB%93.html'>总结</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14729752771490.html">
                
                  <h1>App字体被放大</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p><strong>分析原因：</strong></p>

<p>由于新版本上线更换了LaunchImage,没有注意美工给的图片尺寸，由于图片尺寸不符合标准导致程序在真机上运行所有字体被放大显示发虚</p>

<p><strong>解决</strong>：</p>

<p>将<code>LaunchImage</code>的所有尺寸按照要求从新剪裁设置即可。<br/>
<img src="media/14729752771490/66055389.jpg" alt=""/></p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/9/4</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E6%80%BB%E7%BB%93.html'>总结</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14729752147247.html">
                
                  <h1>结构体</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>在ios开发中我们经常要使用结构体，但是我们在使用结构体数组的时候xcode会有黄色警告提示。</p>

<blockquote>
<p>BMKMapPoint *points = new BMKMapPoint[pointCount];</p>
</blockquote>

<p>BMKMapPoint 是一个结构体，我动态声明一个结构体数组。</p>

<blockquote>
<p>delete [] points;</p>
</blockquote>

<p>释放一个结构体数组。</p>

<p>编写函数希望返回一个结构体数组的时候</p>

<pre><code>+ (CLLocationCoordinate2D *)arrayTransformCoordinate:(NSArray *)array
{
    CLLocationCoordinate2D coors[60];
    int i =0;
    for (NSDictionary *dic in array) {
        coors[i].latitude = ((NSNumber *)([dic objectForKey:@&quot;latitude&quot;])).doubleValue;
        coors[i].longitude = ((NSNumber *)([dic objectForKey:@&quot;longitude&quot;])).doubleValue;
        i++;
    }
    return coors;
}

</code></pre>

<p>我们可以这样来消除黄色警告：将.m后缀改为.mm </p>

<p>这样就行了，意思就是 告诉编译器用objective-c++来编译文件。</p>

<h2 id="toc_0">结构体数组长度</h2>

<blockquote>
<p>sz = (sizeof foo) / (sizeof foo[0]);</p>
</blockquote>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/9/4</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html'>基础知识</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14729751822088.html">
                
                  <h1>遍历</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">常用遍历方法</h2>

<ul>
<li>经典for循环</li>
<li>for in (NSFastEnumeration)</li>
<li>makeObjectsPerformSelector</li>
<li>kvc集合运算符</li>
<li>enumerateObjectsUsingBlock</li>
<li>enumerateObjectsWithOptions(NSEnumerationConcurrent)</li>
<li>dispatch_apply</li>
</ul>

<h2 id="toc_1">使用block遍历字典</h2>

<p>使用block同时遍历字典key，value<br/>
block版本的字典遍历可以同时取key和value（forin只能取key再手动取value），如：</p>

<pre><code>NSDictionary *dict = @{@&quot;a&quot;: @&quot;1&quot;, @&quot;b&quot;: @&quot;2&quot;};
[dict enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) {
    NSLog(@&quot;key: %@, value: %@&quot;, key, obj);
}];

</code></pre>

<h2 id="toc_2">Array、Set遍历</h2>

<pre><code>NSArray *strings = @[@&quot;1&quot;, @&quot;2&quot;, @&quot;3&quot;];
for (NSString *string in [strings reverseObjectEnumerator]) {
    NSLog(@&quot;%@&quot;, string);
}

[array enumerateObjectsWithOptions:NSEnumerationReverse usingBlock:^(Sark *sark, NSUInteger idx, BOOL *stop) {
    [sark doSomething];
}];
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/9/4</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html'>基础知识</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14729751502502.html">
                
                  <h1>UIWindow</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">获取屏幕window</h2>

<pre><code>[UIApplication sharedApplication].keyWindow]

</code></pre>

<h2 id="toc_1">屏幕上手势监听</h2>

<p><img src="media/14569958313677.jpg" alt=""/></p>

<p>问题：设计弹出层使用window来实现，对<code>item</code>的背景设置了<code>tap</code>事件，并设置了跳转，对<code>window</code>的<code>touch</code>事件进行设置，点击后<code>window</code>消失，但是<code>touch</code>会拦截<code>tap</code>的事件，只好进行修改，对<code>tap</code>设置了代理来进行区别<code>tap</code>动作</p>

<p>代码：</p>

<pre><code>- (void)dismiss{
    [self setHidden:YES];    
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    // 点击消失
    [self dismiss];
}
//如果不加手势监听会直接执行touchesBegan  是对话框消失
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {

    // Disallow recognition of tap gestures in the segmented control.
    if ((touch.view ==_bg_head) &amp;&amp; (gestureRecognizer == _headtap)) {
        [self gotoEditUserInfoController];
    }
    if ((touch.view ==_bg_setting) &amp;&amp; (gestureRecognizer == _settingtap)) {
        [self gotoSettingController];
    }
    return YES;
}

</code></pre>

<p>同时要对原有的<code>keywindow</code>进行保存，当弹出窗口退出时重新调用其<code>makeKeyAndVisible</code>方法，对弹出窗口调用<code>resignKeyWindow</code>方法并赋值为<code>nil</code></p>

<pre><code> [_itemSettingView.originWindow makeKeyAndVisible];
 [_itemSettingView resignKeyWindow];

</code></pre>

<h2 id="toc_2">模仿引导操作视图、添加遮罩view遮罩整个屏幕，包括status bar、navigationbar</h2>

<p>在ios7中，获取当前UIWindow，向上添加遮罩view</p>

<pre><code>UIView * bg =[[UIView alloc]initWithFrame:[UIScreen mainScreen].bounds];
bg.backgroundColor = [UIColor blackColor];
bg.alpha = 0.5;
UIWindow* window = [[UIApplication sharedApplication]keyWindow];
[window addSubview:bg];
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/9/4</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E5%9F%BA%E7%A1%80%E6%8E%A7%E4%BB%B6.html'>基础控件</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14729750807474.html">
                
                  <h1>UIView</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">masonry 添加约束，并修改约束添加View动画</h2>

<pre><code>
//添加约束
masView = [UIView new];
masView.backgroundColor = [UIColor redColor];
[self.view addSubview:masView];
[masView mas_makeConstraints:^(MASConstraintMaker *make) {

    make.leading.equalTo(self.view).offset(20);//距离self.view左侧20
    make.top.equalTo(self.view).offset(200);//距离self.view顶部200
    make.width.offset(80);//宽度80
    make.height.offset(80);//高度80
}];

//更新约束并添加动画,如果更新不成功可尝试 mas_remakeConstraints
[masView mas_updateConstraints:^(MASConstraintMaker *make) {
    make.width.and.height.offset(100);
    make.leading.equalTo(self.view).offset(100);
}];

[UIView animateWithDuration:3 animations:^{
    [self.view layoutIfNeeded];
}];

</code></pre>

<h2 id="toc_1">uiview 圆角设置</h2>

<pre><code>m_mainImgView.layer.cornerRadius = 6;
m_mainImgView.layer.masksToBounds = YES; 

</code></pre>

<h2 id="toc_2">UIView缩放动画</h2>

<pre><code>-(void)mapView:(BMKMapView *)mapView didAddAnnotationViews:(NSArray *)views
{
    /* 为新添的annotationView添加弹出动画. */
    for (UIView *view in views)
    {
        [self addBounceAnnimationToView:view];
    }

}
/* annotation弹出的动画. */
- (void)addBounceAnnimationToView:(UIView *)view
{
    CAKeyframeAnimation *bounceAnimation = [CAKeyframeAnimation animationWithKeyPath:@&quot;transform.scale&quot;];

    bounceAnimation.values = @[@(0.05), @(1.1), @(0.9), @(1)];
    bounceAnimation.duration = 0.6;

    NSMutableArray *timingFunctions = [[NSMutableArray alloc] initWithCapacity:bounceAnimation.values.count];
    for (NSUInteger i = 0; i &lt; bounceAnimation.values.count; i++)
    {
        [timingFunctions addObject:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
    }
    [bounceAnimation setTimingFunctions:timingFunctions.copy];

    bounceAnimation.removedOnCompletion = NO;

    [view.layer addAnimation:bounceAnimation forKey:@&quot;bounce&quot;];
}

</code></pre>

<h4 id="toc_3">边框阴影</h4>

<pre><code>- (void)viewDidLoad  
{  
    [self.view setBackgroundColor:[UIColor whiteColor]];  
    UIView *shadowView=[[UIView alloc] initWithFrame:CGRectMake(100, 100, 120, 120)];  
    [shadowView setBackgroundColor:[UIColor grayColor]];  
    [shadowView.layer setCornerRadius:4.0f];//设置View圆角  
    [shadowView.layer setShadowColor:[UIColor blackColor].CGColor];//设置View的阴影颜色  
    [shadowView.layer setShadowOpacity:0.8f];//设置阴影的透明度  
    [shadowView.layer setOpacity:0.5f];//设置View的透明度  
    [shadowView.layer setShadowOffset:CGSizeMake(4.0, 3.0)];//设置View Shadow的偏移量  
    [self.view addSubview:shadowView];  
    [super viewDidLoad];  
    // Do any additional setup after loading the view, typically from a nib.  
}  
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/9/4</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E5%9F%BA%E7%A1%80%E6%8E%A7%E4%BB%B6.html'>基础控件</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14729750523588.html">
                
                  <h1>TextView</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">输入单行文本</h2>

<p>使用UITextField</p>

<h2 id="toc_1">输入文本显示密码样式</h2>

<pre><code>et_newPwd.secureTextEntry = YES;

</code></pre>

<h2 id="toc_2">uitextview 小键盘完成回调</h2>

<pre><code>- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range
 replacementText:(NSString *)text {
    if ([text isEqualToString:@&quot;\n&quot;]) {
        [textView resignFirstResponder];
        return NO;
    }
    return YES;
}

</code></pre>

<h2 id="toc_3">uitextview 计算动态高度</h2>

<p>textview需要将<code>scrollenabled</code>设置为no</p>

<pre><code> _textView.scrollEnabled = NO;
 _textView.showsVerticalScrollIndicator = NO;
 _textView.showsHorizontalScrollIndicator = NO;

</code></pre>

<pre><code>
//方式一
#pragma mark -  uitextview 代理
- (void)textViewDidChange:(UITextView *)theTextView
{

     float oldheight = theTextView.frame.size.height;
     float height = [self.tv_layer_title sizeThatFits:CGSizeMake(self.tv_layer_title.frame.size.width, FLT_MAX)].height ;

    if (fabs(height - oldheight) &gt; 0.01) {
        [self.bg_title mas_updateConstraints:^(MASConstraintMaker *make) {
            make.height.mas_equalTo(height+20);
        }];

        [self.tv_layer_title mas_updateConstraints:^(MASConstraintMaker *make) {
            make.height.mas_equalTo(height);
        }];

    }

}

//方式二  计算放入文字放入控件后应有的高度

//这里的20 是放置控件时与父视图左右边距空留出来的20
//self.caluteCell.textView 即是要放入文字的控件
CGSize infoSize = [self.caluteCell.textView sizeThatFits:CGSizeMake(SCREEN_WIDTH-20, FLT_MAX)];

</code></pre>

<h2 id="toc_4">调整uitextview 默认内边距</h2>

<pre><code>_textView.contentInset = UIEdgeInsetsMake(0, -5, 0, 0);

</code></pre>

<h3 id="toc_5">uitextView 调整视图中心点位置</h3>

<pre><code>//注册监听
 [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(changeContentViewPoint:)
                                                     name:UIKeyboardWillShowNotification
                                                   object:nil];

        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(changeContentViewPoint:)
                                                     name:UIKeyboardWillHideNotification
                                                   object:nil];

// 根据键盘状态，调整_mainView的位置
- (void) changeContentViewPoint:(NSNotification *)notification{
    NSDictionary *userInfo = [notification userInfo];
    NSValue *value = [userInfo objectForKey:UIKeyboardFrameEndUserInfoKey];
    CGFloat keyBoardEndY = value.CGRectValue.origin.y;  // 得到键盘弹出后的键盘视图所在y坐标

    NSNumber *duration = [userInfo objectForKey:UIKeyboardAnimationDurationUserInfoKey];
    NSNumber *curve = [userInfo objectForKey:UIKeyboardAnimationCurveUserInfoKey];

    // 添加移动动画，使视图跟随键盘移动
    [UIView animateWithDuration:duration.doubleValue animations:^{
        [UIView setAnimationBeginsFromCurrentState:YES];
//        [UIView setAnimationCurve:curve];

        self.center = CGPointMake(self.center.x, keyBoardEndY -64- self.bounds.size.height/2.0);   // keyBoardEndY的坐标包括了状态栏的高度，要减去

    }];
}

</code></pre>

<h3 id="toc_6">获取view所在的controller</h3>

<pre><code> UIResponder *responder = self;
                    while ((responder = [responder nextResponder])){
                        if ([responder isKindOfClass: [EditMarker2ViewController class]])
                        {
                            EditMarker2ViewController* controller =(EditMarker2ViewController *)responder;
                            [controller.navigationController popViewControllerAnimated:YES];

                        }

                    }

</code></pre>

<h3 id="toc_7">UITextView的包涵inset高度</h3>

<p>设置<code>_textView.contentInset = UIEdgeInsetsMake(10,0,-10,0);</code>即上边距和底边距各10像素<br/>
但是使用<code>fdcell</code>利用约束动态计算cell高度时测量的是不包含inset的uitextview高度所以需要额外+20个单位像素<br/>
```objc<br/>
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath<br/>
{</p>

<pre><code>if (indexPath.section==1) {
    return 108;
}else
{
    float height =  [tableView fd_heightForCellWithIdentifier:@&quot;cell&quot; configuration:^(EditMarkerExpandableTextCellTableViewCell* cell) {
        MarkerAttr* attr = [self.attrArray objectAtIndex:indexPath.row];

        cell.textView.text = [self.dataDic objectForKey:attr.key];

    }];
    //额外添加10+10 上边距+下边距 inset
    return height+20.0f;
}
return 100;

</code></pre>

<p>}</p>

<pre><code>
### 失去焦点  使键盘消失
```objc
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
   [textField resignFirstResponder];
    return YES;
}

</code></pre>

<h3 id="toc_8">点击空白处隐藏键盘</h3>

<pre><code>-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self.view endEditing:YES];
}
</code></pre>

<pre><code>
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/9/4</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E5%9F%BA%E7%A1%80%E6%8E%A7%E4%BB%B6.html'>基础控件</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14729750129157.html">
                
                  <h1>UITextField</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">UITextField 快速添加左侧内边距padding</h2>

<p>思路1：可向UITextField左侧添加一个空白的view，来调整内边距</p>

<pre><code>UIView *paddingView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 10, 10)];
_et_groupName.leftView = paddingView;
_et_groupName.leftViewMode = UITextFieldViewModeAlways;
</code></pre>

<p>思路2：移动sublayer的位置</p>

<pre><code class="language-objc">textField.layer.sublayerTransform = CATransform3DMakeTranslation(8, 0, 0);
</code></pre>

<p>PS:思路2会有小的缺陷，如果显示clearbutton的画会显示不全</p>

<p><strong>from:</strong><a href="http://stackoverflow.com/questions/2694411/text-inset-for-uitextfield">Text inset for UITextField</a></p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/9/4</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E5%9F%BA%E7%A1%80%E6%8E%A7%E4%BB%B6.html'>基础控件</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14729749889650.html">
                
                  <h1>UITabelView</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">使用开源组件FDTemplateLayoutCell 动态计算Cell高度相关问题</h2>

<ol>
<li>自定义Cell</li>
</ol>

<p>需要注意tableview注册自定义的cell，否侧程序崩溃报错</p>

<pre><code>[self.tbl_marker registerClass:[DataListOverLayerTableViewCell class] forCellReuseIdentifier:@&quot;LINE&quot;];

</code></pre>

<ol>
<li>自定义Cell 约束条件</li>
</ol>

<p>如果自定义Cell约束条件错误会导致测量的高度为0，需逐步修改约束条件直至能计算出高度</p>

<p><strong>注意：约束条件最好包括 top\bottom\left\right 和 width、height</strong>这样能最大程度保证能测量出来高度</p>

<pre><code>[self.btn_title mas_makeConstraints:^(MASConstraintMaker *make) {

make.left.equalTo(self.contentView.mas_left).offset(10);

make.top.equalTo(self.contentView.mas_top).offset(10);

make.bottom.equalTo(hline.mas_top).offset(-10);

make.right.equalTo(self.contentView.mas_right).offset(-10);

make.width.mas_equalTo(self.contentView.frame.size.width-20);

make.height.greaterThanOrEqualTo(@60);

}];       

</code></pre>

<h2 id="toc_1">设置cell点击选中状态去掉背景</h2>

<p>由于使用FDTemplateLayoutCell 作为预加载cell高度计算，这时会先调用<code>**heightForRowAtIndexPath**</code>方法计算高度，在<code>tableView fd_heightForCellWithIdentifier:@&quot;MARKER&quot; configuration:^(DataListTableViewCell* cell)</code>中会生成cell，所以在执行方法<code>cellForRowAtIndexPath</code>的时候就会取得缓存cell<code>[tableView dequeueReusableCellWithIdentifier:@&quot;MARKER&quot;]</code>不会执行cell的初始化方法,所以在初始化里执行<code>cell.selectionStyle = UITableViewCellSelectionStyleNone;</code>不会有任何效果，需要移除到初始化方法外</p>

<pre><code>-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
//取消选中效果
[self.tbl_marker deselectRowAtIndexPath:[self.tbl_marker indexPathForSelectedRow] animated:YES];
}

</code></pre>

<h2 id="toc_2">就尼玛0.5进位问题导致cell高度不对，uitextview不显示文字</h2>

<pre><code>//这里返回的height 是float 不能随意改成int
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{

if (indexPath.section==1) {
   return 108;
}else
{
//这里返回的height 是float 不能随意改成int
//如果返回int 会导致舍去0.5个单位 导致uitextview 高度被舍去1px 导致不显示文字
   float height =  [tableView fd_heightForCellWithIdentifier:@&quot;cell&quot; configuration:^(EditMarkerExpandableTextCellTableViewCell* cell) {
       MarkerAttr* attr = [self.attrArray objectAtIndex:indexPath.row];

       cell.textView.text = [self.dataDic objectForKey:attr.key];

   }];

   return height;
}
return 100;

}

</code></pre>

<h2 id="toc_3">获取被点击view所在的UITableViewCell</h2>

<p><strong><em>原因</em></strong>：由于IOS系统不同，不能使用<code>LayerCellTableViewCell* cell = (LayerCellTableViewCell*)[[view superview ] superview]</code>来获取cell，因为contentview和cell之间在不同版本里相隔了一个其他view</p>

<p>使用如下代码解决问题：</p>

<pre><code>CGPoint buttonPosition = [view convertPoint:CGPointZero toView:self.tbv_layers];
NSIndexPath *indexPath = [self.tbv_layers indexPathForRowAtPoint:buttonPosition];
LayerCellTableViewCell* cell = (LayerCellTableViewCell*)[self.tbv_layers cellForRowAtIndexPath:indexPath];

</code></pre>

<h2 id="toc_4">利用UITable的group特性来设置cell之间的间距并取消header的悬浮效果</h2>

<pre><code>- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    CGFloat sectionHeaderHeight = 10; //这里是我的headerView和footerView的高度
    if (_tableView.contentOffset.y&lt;=sectionHeaderHeight&amp;&amp;_tableView.contentOffset.y&gt;=0) {
        _tableView.contentInset = UIEdgeInsetsMake(-_tableView.contentOffset.y, 0, 0, 0);
    } else if (_tableView.contentOffset.y&gt;=sectionHeaderHeight) {
        _tableView.contentInset = UIEdgeInsetsMake(-sectionHeaderHeight, 0, 0, 0);
    }
}

</code></pre>

<h2 id="toc_5">刷新单个cell或者section</h2>

<pre><code>//一个section刷新      
NSIndexSet *indexSet=[[NSIndexSet alloc]initWithIndex:2];      
[tableview reloadSections:indexSet withRowAnimation:UITableViewRowAnimationAutomatic];      
//一个cell刷新      
NSIndexPath *indexPath=[NSIndexPath indexPathForRow:3 inSection:0];      
[tableView reloadRowsAtIndexPaths:[NSArray arrayWithObjects:indexPath,nil] withRowAnimation:UITableViewRowAnimationNone]; 

</code></pre>

<h2 id="toc_6">UITableView 去掉底部多余分割线</h2>

<pre><code>self.tableView.tableFooterView=[[UIView alloc]init];//关键语句     

</code></pre>

<h2 id="toc_7">UITableViewCell 选中时背景颜色改变</h2>

<pre><code>tempCell.selectedBackgroundView = [[UIView alloc] initWithFrame:tempCell.frame] ;
tempCell.selectedBackgroundView.backgroundColor = [ColorChangeUtil getColor:@&quot;#f1f1f1&quot;];

</code></pre>

<h2 id="toc_8">避免出现uitableview左移</h2>

<pre><code>-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([cell respondsToSelector:@selector(setSeparatorInset:)])
    {
        [cell setSeparatorInset:UIEdgeInsetsZero];
    }
    if ([cell respondsToSelector:@selector(setPreservesSuperviewLayoutMargins:)])
    {
        [cell setPreservesSuperviewLayoutMargins:NO];
    }
    if ([cell respondsToSelector:@selector(setLayoutMargins:)])
    {
        [cell setLayoutMargins:UIEdgeInsetsZero];
    }
}

</code></pre>

<h2 id="toc_9">避免cell重用</h2>

<p>通过为每个cell指定不同的重用标识符(reuseIdentifier)来解决。<br/>
重用机制是根据相同的标识符来重用cell的，标识符不同的cell不能彼此重用。于是我们将每个cell的标识符都设置为不同，就可以避免不同cell重用的问题了。</p>

<pre><code> NSString *ID = [NSString stringWithFormat:@&quot;Cell%ld%ld&quot;, [indexPath section], [indexPath row]];//以indexPath来唯一确定cell
AddGroupMemberCell *cell = [tableView dequeueReusableCellWithIdentifier:ID];
    if (cell == nil) {
        cell = [[AddGroupMemberCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:ID];
    }

</code></pre>

<h2 id="toc_10">使用FDCELL和xib配合加载自定义cell 约束警告的错误</h2>

<p><code>self.tableView.estimatedRowHeight = 200;//预算行高</code>如果不加这句话控制台会报警告错误<br/>
<code>objc<br/>
&lt;NSLayoutConstraint:0x154f256f0 UILabel:0x159460f80.leading == UITableViewCellContentView:0x159460e00.leading + 10&gt;,<br/>
&lt;NSLayoutConstraint:0x154f285e0 SZTextView:0x1557b1200.leading == UILabel:0x159460f80.leading&gt;,<br/>
&lt;NSLayoutConstraint:0x159470c20 UITableViewCellContentView:0x159460e00.trailing == SZTextView:0x1557b1200.trailing + 10&gt;,<br/>
&lt;NSLayoutConstraint:0x1561857d0 UITableViewCellContentView:0x159460e00.width == 0&gt;,<br/>
</code></p>

<p>总是提示<code>contentview.width</code>的宽度为0</p>

<h2 id="toc_11">FDCELL 打印log</h2>

<pre><code>self.tableView.fd_debugLogEnabled = YES;//开启log打印高度
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/9/4</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E5%9F%BA%E7%A1%80%E6%8E%A7%E4%BB%B6.html'>基础控件</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14729749117844.html">
                
                  <h1>UIScreen</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">Controller中非成员变量window添加到窗口不显示</h2>

<p><strong>不显示：</strong></p>

<pre><code>-(void)gotoSetting
{
    UIWindow* window = [[UIWindow alloc]initWithFrame:[[UIScreen mainScreen]    bounds]];
    window.windowLevel = UIWindowLevelStatusBar+1;
    window.backgroundColor =[UIColor redColor];
    window.hidden = NO;
    [window makeKeyAndVisible];
}

</code></pre>

<p><strong>显示</strong></p>

<pre><code>@property (nonatomic, strong) UIWindow* window;
-(void)gotoSetting
{
    _window = [[UIWindow alloc]initWithFrame:[[UIScreen mainScreen] bounds]];
    _window.windowLevel = UIWindowLevelStatusBar+1;
    _window.backgroundColor =[UIColor redColor];
    _window.hidden = NO;
    [_window makeKeyAndVisible];
}
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/9/4</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E5%9F%BA%E7%A1%80%E6%8E%A7%E4%BB%B6.html'>基础控件</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="14729748694506.html">
                
                  <h1>UINavigationController</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">UINavigationController 调整controller的顺序</h2>

<p><strong>业务场景：</strong></p>

<p>有时候我们需要调整UINavigationController中controller的顺序，但是单独靠</p>

<pre><code>- (void)pushViewController:(UIViewController *)viewController animated:(BOOL)animated
- (nullable UIViewController *)popViewControllerAnimated:(BOOL)animated

</code></pre>

<p>并不能满足我们的需要。</p>

<p>比如：在一个列表界面，创建新信息进入编辑界面，成功后在进入展示界面，这时如果我们通过<strong><code>popController</code></strong>方法返回的到<strong>列表界面</strong>，就会一级一级弹出，会在弹出编辑界面之后才返回到<strong>列表界面</strong>，影响用户体验。</p>

<p><strong>解决方案：</strong></p>

<p>使用<code>NavigationController</code>的<code>setViewControllers</code>方法来调整controller的顺序</p>

<pre><code>NSMutableArray * viewControllers = [self.navigationController.viewControllers mutableCopy];
                    [viewControllers removeLastObject];
                    [viewControllers addObject:controller];
                    [self.navigationController setViewControllers:viewControllers animated:YES];

</code></pre>

<h2 id="toc_1">调整navagationbar的背景颜色</h2>

<pre><code> UINavigationController* nav = [[UINavigationController alloc]initWithRootViewController:controller];
 [nav.navigationBar setBarTintColor:[ColorChangeUtil getColor:LIGHT_BLUE]];

</code></pre>

<h2 id="toc_2">显示的模态视图带有navagationbar</h2>

<p>默认模态视图不带navagationbar，需要自己添加navagationController来为维持controller栈的关系</p>

<pre><code>    CreateNewViewController* controller = [[CreateNewViewController alloc]init];
    UINavigationController* nav = [[UINavigationController alloc]initWithRootViewController:controller];
    [nav.navigationBar setBarTintColor:[ColorChangeUtil getColor:LIGHT_BLUE]];
    [self.navigationController presentViewController:nav animated:YES completion:nil];

</code></pre>

<h2 id="toc_3">调整UIBarButtonItem的字体大小</h2>

<pre><code>// You may specify the font, text color, and shadow properties for the title in the text attributes dictionary, using the keys found in NSAttributedString.h.
[mUIBarButtonItem setTitleTextAttributes:@{NSFontAttributeName : FONT(15)} forState:UIControlStateNormal];
</code></pre>

<h2 id="toc_4">UiViewController pushController切换出现卡顿</h2>

<blockquote>
<p>导致卡顿的的罪魁祸首就是UIViewController的View的默认color为空，背景色是透明的。这其实不是卡顿，而是由于透明颜色重叠后视觉上的问题，设置一个背景色就可以了。</p>
</blockquote>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2016/9/4</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E5%9F%BA%E7%A1%80%E6%8E%A7%E4%BB%B6.html'>基础控件</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
              


			<div class="row">
			  <div class="large-6 columns">
			  <p class="text-left" style="padding-top:25px;">
			   <a href="ios_1.html">&laquo; Prev Page</a>  
			  </p>
			  </div>
			  <div class="large-6 columns">
			<p class="text-right" style="padding-top:25px;">
			 <a href="ios_3.html">&raquo; Next Page</a> 
			</p>
			  </div>
			</div>
		</div>
	</div><!-- large 8 -->

 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <div class="site-a-logo"><img src="http://7xk16d.com1.z0.glb.clouddn.com/97A0110B-DF4C-45FA-A732-AF9BD1B1FA36.JPG" /></div>
            
                <h1>小小程序猿</h1>
                <div class="site-des">目前就职于一家北京的创业公司，正在苦逼成长中...</div>
                <div class="social">











  <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>

             

              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
        
            <a href="ios.html"><strong>ios</strong></a>
        
            <a href="Android.html"><strong>Android</strong></a>
        
            <a href="%E5%85%B6%E4%BB%96.html"><strong>其他</strong></a>
        
            <a href="express.html"><strong>express</strong></a>
        
            <a href="%E6%95%B0%E6%8D%AE%E5%BA%93.html"><strong>数据库</strong></a>
        
            <a href="Vue.html"><strong>Vue</strong></a>
        
            <a href="sequelize.html"><strong>sequelize</strong></a>
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="15125625563816.html">MAC 电脑自带软件处理PNG图片背景透明</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15123557749433.html">Git 删除已经跟踪的文件或目录</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15120934542709.html">NSTimer 闪退问题</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15120110700552.html">地图画线 polygon</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15117817736257.html">node xlsx</a>
			      </li>
		     
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		   
		  		</ul>
                </div>
              </div>
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
</div>

        </section>
      </div>
    </div>

  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>

    <script src="asset/chart/all-min.js"></script><script type="text/javascript">$(function(){    var mwebii=0;    var mwebChartEleId = 'mweb-chart-ele-';    $('pre>code').each(function(){        mwebii++;        var eleiid = mwebChartEleId+mwebii;        if($(this).hasClass('language-sequence')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = Diagram.parse($(this).text());            diagram.drawSVG(eleiid,{theme: 'simple'});        }else if($(this).hasClass('language-flow')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = flowchart.parse($(this).text());            diagram.drawSVG(eleiid);        }    });});</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?1a9e7585c72e6c3ff233103ec49aecd2";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


  </body>
</html>
